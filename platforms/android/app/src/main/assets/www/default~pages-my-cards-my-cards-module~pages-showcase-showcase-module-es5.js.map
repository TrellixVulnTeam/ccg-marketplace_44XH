{"version":3,"sources":["webpack:///src/app/components/put-onsale-form/put-onsale-form.component.scss","webpack:///src/app/components/transfer-card-form/transfer-card-form.component.scss","webpack:///src/app/components/put-onsale-form/put-onsale-form.component.ts","webpack:///src/app/components/transfer-card-form/transfer-card-form.component.html","webpack:///src/app/components/card/card.component.html","webpack:///src/app/components/transfer-card-form/transfer-card-form.component.ts","webpack:///src/app/components/put-onsale-form/put-onsale-form.component.html","webpack:///src/app/components/card/card.component.ts","webpack:///src/app/components/card/card.component.scss","webpack:///src/app/services/card.service.ts"],"names":["PutOnsaleFormComponent","globalService","nodeService","cardService","tokenId","result","dismissModal","price","document","getElementById","value","console","log","showDialog","loading","putOnSale","then","err","selector","template","TransferCardFormComponent","address","web3","utils","isAddress","transfer","CardComponent","walletService","actionSheetController","isMyCardsPage","onBoughtEvent","onTransferCardEvent","onPutOnSaleCardEvent","colorMapping","code","name","color","textColor","defaultColorCode","imgHash","type","available","setAvailable","buy","emit","create","header","cssClass","buttons","text","role","icon","handler","showModal","onSale","success","actionSheet","present","onDidDismiss","CardService","description","mana","attack","guard","data","contract","methods","mint","toWei","encodeABI","sendTransaction","contractAddress","privateKey","getTokensIdOnSale","call","from","tokens","getCards","getMyTokensId","Promise","resolve","reject","length","batch","BatchRequest","batchResponses","cards","i","add","getToken","request","error","response","push","fromWei","execute","buyToken","setTokenOnSale","providedIn"],"mappings":"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","file":"default~pages-my-cards-my-cards-module~pages-showcase-showcase-module-es5.js","sourcesContent":["export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwdXQtb25zYWxlLWZvcm0uY29tcG9uZW50LnNjc3MifQ== */\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ0cmFuc2Zlci1jYXJkLWZvcm0uY29tcG9uZW50LnNjc3MifQ== */\";","import { Component, OnInit, Input } from '@angular/core';\n\nimport { GlobalService } from \"src/app/services/global.service\";\nimport { NodeService } from \"src/app/services/node.service\";\nimport { CardService } from \"src/app/services/card.service\";\n\n@Component({\n  selector: 'app-put-onsale-form',\n  templateUrl: './put-onsale-form.component.html',\n  styleUrls: ['./put-onsale-form.component.scss'],\n})\nexport class PutOnsaleFormComponent implements OnInit {\n\n    @Input() tokenId: string = '';\n\n    constructor(\n        private globalService: GlobalService,\n        private nodeService: NodeService,\n        private cardService: CardService\n    ) { }\n\n    ngOnInit() {}\n\n    dismissModal(result) {\n        this.globalService.dismissModal(result);\n    }\n\n    putOnSaleCard() {\n        let price = (document.getElementById('put-onsale-card-price') as HTMLInputElement).value;\n        \n        console.log(\"this.tokenId\", this.tokenId);\n        console.log(\"price\", price);\n        \n        if (!price) return this.globalService.showDialog(\"Introduce el precio de la carta\", null);\n        \n        this.globalService.loading = true;\n        this.cardService\n            .putOnSale(this.tokenId, price, true)\n            .then(() => {\n                this.globalService.loading = false;\n                this.dismissModal(true);\n            })\n            .catch(err => {\n                this.globalService.loading = false;\n                this.globalService.showDialog(err, null);\n            });\n    }\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Transferir carta</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"dismissModal(false)\\\">Close</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header> \\n<ion-content fullscreen>\\n\\n    <ion-list lines=\\\"full\\\" class=\\\"ion-margin\\\">\\n        <ion-list-header lines=\\\"full\\\">\\n          <ion-label>\\n              <b>Introduce una dirección válida</b>\\n          </ion-label>\\n        </ion-list-header>     \\n\\n        <ion-item>\\n          <ion-input id=\\\"transfer-card-address\\\"\\n                  position=\\\"floating\\\"\\n                  placeholder=\\\"Dirección del destinatario (Address)\\\" \\n              ></ion-input>\\n        </ion-item>\\n\\n    </ion-list>\\n\\n    <ion-button (click)=\\\"transferCard()\\\" color=\\\"success\\\" class=\\\"ion-margin\\\" style=\\\"text-transform:none\\\">Transferir</ion-button>\\n</ion-content>\\n    \\n\";","export default \"<div class=\\\"wrapper-out\\\">\\n    <div class=\\\"wrapper-in\\\" style=\\\"background-color: {{getColor()}}; color: {{getTextColor()}};\\\">\\n        <div class=\\\"name\\\"><b>{{name}}</b></div>\\n        <img class=\\\"card-img\\\" src={{getImageSrc()}}/>\\n        <div *ngIf=\\\"!available && !isMyCardsPage\\\" class=\\\"available-info-label\\\">\\n            DESACTIVADA\\n        </div> \\n        <div class=\\\"description\\\">{{description}}</div>      \\n        <div *ngIf=\\\"onSale\\\" class=\\\"price\\\">\\n            {{price}} eth\\n        </div> \\n        <ion-button *ngIf=\\\"walletService.isAdmin && !isMyCardsPage\\\" class=\\\"enable-disable-button\\\" color=\\\"{{getEnableDisableColor()}}\\\" size=\\\"small\\\" (click) =\\\"setAvailable()\\\">\\n            {{getEnableDisableText()}}\\n        </ion-button>\\n        <div *ngIf=\\\"onSale && isMyCardsPage\\\" class=\\\"onsale-info-label\\\">\\n            EN VENTA\\n        </div>         \\n        <div class=\\\"properties\\\">\\n            Color: <b>{{getColorName()}}</b><br>\\n            Tipo: <b>{{getTypeName()}}</b><br>\\n            Maná: <b>{{mana}}</b><br>\\n            Ataque: <b>{{attack}}</b><br>\\n            Defensa: <b>{{guard}}</b>\\n        </div>      \\n    </div>\\n    <div style=\\\"text-align:center; margin-top: 5px;\\\">\\n        <ion-button *ngIf=\\\"available && !isMyCardsPage\\\" color=\\\"secondary\\\" size=\\\"small\\\" (click) =\\\"buy()\\\">Comprar</ion-button>\\n        <ion-button *ngIf=\\\"isMyCardsPage\\\" color=\\\"secondary\\\" size=\\\"small\\\" (click) =\\\"showActions()\\\" style=\\\"text-transform:none\\\">Menú de acciones</ion-button>        \\n    </div> \\n</div>\";","import { Component, OnInit, Input } from '@angular/core';\n\nimport { GlobalService } from \"src/app/services/global.service\";\nimport { NodeService } from \"src/app/services/node.service\";\nimport { CardService } from \"src/app/services/card.service\";\n\n@Component({\n  selector: 'app-transfer-card-form',\n  templateUrl: './transfer-card-form.component.html',\n  styleUrls: ['./transfer-card-form.component.scss'],\n})\nexport class TransferCardFormComponent implements OnInit {\n\n    @Input() tokenId: string = '';\n\n    constructor(\n        private globalService: GlobalService,\n        private nodeService: NodeService,\n        private cardService: CardService\n    ) { }\n\n    ngOnInit() {}\n\n    dismissModal(result) {\n        this.globalService.dismissModal(result);\n    }\n\n    transferCard() {\n        let address = (document.getElementById('transfer-card-address') as HTMLInputElement).value;\n        \n        console.log(\"this.tokenId\", this.tokenId);\n        console.log(\"address\", address);\n\n        if (!address) return this.globalService.showDialog(\"Introduce una dirección válida\", null);\n        if (!this.nodeService.web3.utils.isAddress(address)) return this.globalService.showDialog(\"La dirección no es una dirección válida\", null);\n\n        this.globalService.loading = true;\n        this.cardService\n            .transfer(this.tokenId, address)\n            .then(() => {\n                this.globalService.loading = false;\n                this.dismissModal(true);\n            })\n            .catch(err => {\n                this.globalService.loading = false;\n                this.globalService.showDialog(err, null);\n            });\n    }\n\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>Poner carta a la venta</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"dismissModal(false)\\\">Close</ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header> \\n<ion-content fullscreen>\\n\\n    <ion-list lines=\\\"full\\\" class=\\\"ion-margin\\\">\\n        <ion-list-header lines=\\\"full\\\">\\n          <ion-label>\\n              <b>Introduce una precio en ethers</b>\\n          </ion-label>\\n        </ion-list-header>     \\n\\n        <ion-item>\\n          <ion-input id=\\\"put-onsale-card-price\\\"\\n                  position=\\\"floating\\\"\\n                  type=\\\"number\\\" \\n                  placeholder=\\\"Nuevo precio de la carta\\\" \\n              ></ion-input>\\n        </ion-item>\\n\\n    </ion-list>\\n\\n    <ion-button (click)=\\\"putOnSaleCard()\\\" color=\\\"success\\\" class=\\\"ion-margin\\\" style=\\\"text-transform:none\\\">Poner a la venta</ion-button>\\n</ion-content>\\n    \\n\";","import { Component, OnInit, Input, Output } from '@angular/core';\nimport { EventEmitter } from '@angular/core';\nimport { ActionSheetController } from '@ionic/angular';\n\nimport { GlobalService } from \"src/app/services/global.service\";\nimport { CardService } from \"src/app/services/card.service\";\nimport { WalletService } from \"src/app/services/wallet.service\";\nimport { TransferCardFormComponent } from 'src/app/components/transfer-card-form/transfer-card-form.component';\nimport { PutOnsaleFormComponent } from 'src/app/components/put-onsale-form/put-onsale-form.component';\n\n@Component({\n  selector: 'app-card',\n  templateUrl: './card.component.html',\n  styleUrls: ['./card.component.scss'],\n})\nexport class CardComponent implements OnInit {\n    \n    @Input() tokenId: string;\n    @Input() name: string;\n    @Input() description: string;\n    @Input() color: string;\n    @Input() type: string;\n    @Input() mana: any;\n    @Input() attack: any;\n    @Input() guard: any;\n    @Input() price: any;\n    @Input() imgHash: string;\n    @Input() available: boolean;\n    @Input() onSale: boolean;\n    @Input() isMyCardsPage: boolean = false;\n\n    @Output() onBoughtEvent: EventEmitter<any> = new EventEmitter();\n    @Output() onTransferCardEvent: EventEmitter<any> = new EventEmitter();\n    @Output() onPutOnSaleCardEvent: EventEmitter<any> = new EventEmitter();\n\n    colorMapping = {\n        \"color_0\": {code: \"0\", name: \"Blanco\", color: \"#FFFFFF\", textColor: \"#000000\"},\n        \"color_1\": {code: \"1\", name: \"Azul\", color: \"blue\", textColor: \"#FFFFFF\"},\n        \"color_2\": {code: \"2\", name: \"Amarillo\", color: \"yellow\", textColor: \"#000000\"},\n        \"color_3\": {code: \"3\", name: \"Verde\", color: \"green\", textColor: \"#FFFFFF\"},\n        \"color_4\": {code: \"4\", name: \"Rojo\", color: \"red\", textColor: \"#FFFFFF\"},\n        \"color_5\": {code: \"5\", name: \"Negro\", color: \"#000000\", textColor: \"#FFFFFF\"},\n    };\n    defaultColorCode = \"1\";\n\n    constructor(\n        private globalService: GlobalService,\n        private cardService: CardService,\n        private walletService: WalletService,\n        private actionSheetController: ActionSheetController\n    ) { }\n\n    ngOnInit() {}\n\n    getColorName() {\n        var code = \"color_\" + this.color;\n        return this.colorMapping[code]?this.colorMapping[code].name:this.colorMapping[this.defaultColorCode].name;\n    }\n\n    getColor() {\n        var code = \"color_\" + this.color;\n        return this.colorMapping[code]?this.colorMapping[code].color:this.colorMapping[this.defaultColorCode].color;\n    }\n\n    getTextColor() {\n        var code = \"color_\" + this.color;\n        return this.colorMapping[code]?this.colorMapping[code].textColor:this.colorMapping[this.defaultColorCode].textColor;\n    }\n\n    getImageSrc() {\n        return \"https://ipfs.io/ipfs/\" + this.imgHash;\n    }    \n    \n    getTypeName() {\n        switch (this.type) {\n            case \"1\":\n                return \"Hechizo\";\n            case \"2\":\n                return \"Reliquia\";\n            default:\n                return \"Criatura\";\n        }\n    }\n    \n    getEnableDisableText() {\n        return this.available? \"DESACTIVAR\" : \"ACTIVAR\";\n    }\n    \n    getEnableDisableColor() {\n        return this.available? \"danger\" : \"success\";\n    }\n    \n    setAvailable() {\n        console.log(\"tokenId\", this.tokenId);\n\n        this.globalService.loading = true;\n        var value = !this.available;\n        this.cardService\n            .setAvailable(this.tokenId, !this.available)\n            .then(() => {\n                this.globalService.loading = false;\n                this.available = value;\n            })\n            .catch(err => {\n                this.globalService.loading = false;\n                this.globalService.showDialog(err, null);\n            });\n        \n    }\n    \n    buy() {\n        console.log(\"tokenId\", this.tokenId);\n        \n        this.globalService.loading = true;\n        this.cardService\n            .buy(this.tokenId, this.price)\n            .then(() => {\n                this.globalService.loading = false;\n                this.onBoughtEvent.emit(this.tokenId);\n            })\n            .catch(err => {\n                this.globalService.loading = false;\n                this.globalService.showDialog(err, null);\n            });\n    }\n\n    async showActions() {\n        const actionSheet = await this.actionSheetController.create({\n            header: 'Menú de acciones',\n            cssClass: 'my-action-sheet',\n            buttons: [{\n                text: 'Transferir la carta a otro usuario',\n                role: 'transfer',\n                icon: 'paper-plane',\n                handler: async () => {\n                    var result = await this.globalService.showModal(TransferCardFormComponent, {\n                        'tokenId': this.tokenId\n                    });\n                    this.onTransferCardEvent.emit(result);\n                }\n            }, {\n                text: this.onSale? 'Ya no la quiero vender' : 'Poner a la venta la carta',\n                role: this.onSale? 'not-sell' : 'sell',\n                icon: 'flash',\n                handler: async () => {\n                    \n                    if (!this.onSale) {\n                        var success = await this.globalService.showModal(PutOnsaleFormComponent, {\n                            'tokenId': this.tokenId\n                        });\n                        this.onPutOnSaleCardEvent.emit({\n                            success: success,\n                            role: 'sell'\n                        });                    \n                    }\n                    else {\n                        this.globalService.loading = true;\n                        this.cardService\n                            .putOnSale(this.tokenId, 1, false)\n                            .then(() => {\n                                this.globalService.loading = false;\n                                this.onPutOnSaleCardEvent.emit({\n                                    success: true,\n                                    role: 'not-sell'\n                                });  \n                            })\n                            .catch(err => {\n                                this.globalService.loading = false;\n                                this.globalService.showDialog(err, null);\n                            });\n                    }\n                }\n            }]\n        });\n        await actionSheet.present();\n\n        const { role } = await actionSheet.onDidDismiss();\n        //console.log('onDidDismiss resolved with role', role);        \n    }\n\n}\n","export default \".wrapper-out {\\n  position: relative;\\n  margin: 10px;\\n  width: 200px;\\n  height: 370px;\\n  /*border: 1px solid red;*/\\n  float: left;\\n  font-size: 10px;\\n}\\n\\n.wrapper-in {\\n  position: relative;\\n  border: 1px solid gray;\\n  border-radius: 5px;\\n  padding: 5px 10px 10px 10px;\\n  width: 200px;\\n  height: 330px;\\n}\\n\\n.name {\\n  width: 100%;\\n  padding: 4px;\\n  text-align: center;\\n}\\n\\n.card-img {\\n  width: 180px;\\n  height: 180px;\\n  /*border: 1px solid gray;*/\\n}\\n\\n.description {\\n  width: 178px;\\n  padding: 4px;\\n  height: 35px;\\n  border-bottom: 1px solid gray;\\n  margin-top: -3px;\\n}\\n\\n.properties {\\n  width: 178px;\\n  padding: 4px;\\n  height: 85px;\\n  margin-top: 2px;\\n  line-height: 15px;\\n}\\n\\n.price {\\n  position: absolute;\\n  bottom: 10px;\\n  right: 10px;\\n  width: 100px;\\n  height: 20px;\\n  font-size: 20px;\\n  text-align: right;\\n}\\n\\n.enable-disable-button {\\n  position: absolute;\\n  bottom: 50px;\\n  right: 10px;\\n  font-size: 8px;\\n}\\n\\n.available-info-label {\\n  position: absolute;\\n  top: 100px;\\n  left: 10px;\\n  border: 1px solid white;\\n  background-color: red;\\n  font-size: 20px;\\n  width: 175px;\\n  height: 30px;\\n  border-radius: 2px;\\n  font-weight: bold;\\n  text-align: center;\\n  padding-top: 2px;\\n}\\n\\n.onsale-info-label {\\n  position: absolute;\\n  bottom: 50px;\\n  right: 10px;\\n  font-size: 10px;\\n  border: 1px solid white;\\n  background-color: red;\\n  color: \\\"white\\\";\\n  border-radius: 2px;\\n  padding: 4px;\\n}\\n\\n/* Works - pass \\\"my-custom-class\\\" in cssClass to increase specificity */\\n\\n.my-action-sheet .action-sheet-group {\\n  background: #e5e5e5;\\n}\\n\\n/* Works - pass \\\"my-custom-class\\\" in cssClass to increase specificity */\\n\\n.my-modal .modal-wrapper {\\n  background: #222;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NhcmQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLHlCQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7QUFDSjs7QUFFQTtFQUNJLGtCQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLDJCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7QUFDSjs7QUFFQTtFQUNJLFdBQUE7RUFDQSxZQUFBO0VBQ0Esa0JBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0EsMEJBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLDZCQUFBO0VBQ0EsZ0JBQUE7QUFDSjs7QUFFQTtFQUNJLFlBQUE7RUFDQSxZQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7RUFDQSxpQkFBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0FBQ0o7O0FBRUE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsY0FBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7RUFDQSxVQUFBO0VBQ0EsVUFBQTtFQUNBLHVCQUFBO0VBQ0EscUJBQUE7RUFDQSxlQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxnQkFBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtFQUNBLHFCQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtBQUNKOztBQUVBLHVFQUFBOztBQUNBO0VBQ0UsbUJBQUE7QUFDRjs7QUFFQSx1RUFBQTs7QUFDQTtFQUNFLGdCQUFBO0FBQ0YiLCJmaWxlIjoiY2FyZC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi53cmFwcGVyLW91dCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG1hcmdpbjogMTBweDtcbiAgICB3aWR0aDogMjAwcHg7XG4gICAgaGVpZ2h0OiAzNzBweDtcbiAgICAvKmJvcmRlcjogMXB4IHNvbGlkIHJlZDsqL1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIGZvbnQtc2l6ZTogMTBweDtcbn1cblxuLndyYXBwZXItaW4ge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBncmF5O1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBwYWRkaW5nOiA1cHggMTBweCAxMHB4IDEwcHg7XG4gICAgd2lkdGg6IDIwMHB4O1xuICAgIGhlaWdodDogMzMwcHg7XG59XG5cbi5uYW1lIHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uY2FyZC1pbWcge1xuICAgIHdpZHRoOiAxODBweDtcbiAgICBoZWlnaHQ6IDE4MHB4O1xuICAgIC8qYm9yZGVyOiAxcHggc29saWQgZ3JheTsqL1xufVxuXG4uZGVzY3JpcHRpb24ge1xuICAgIHdpZHRoOiAxNzhweDtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgaGVpZ2h0OiAzNXB4O1xuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBncmF5O1xuICAgIG1hcmdpbi10b3A6IC0zcHg7XG59XG5cbi5wcm9wZXJ0aWVzIHtcbiAgICB3aWR0aDogMTc4cHg7XG4gICAgcGFkZGluZzogNHB4O1xuICAgIGhlaWdodDogODVweDtcbiAgICBtYXJnaW4tdG9wOiAycHg7XG4gICAgbGluZS1oZWlnaHQ6IDE1cHg7XG59XG5cbi5wcmljZSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogMTBweDtcbiAgICByaWdodDogMTBweDtcbiAgICB3aWR0aDogMTAwcHg7XG4gICAgaGVpZ2h0OiAyMHB4O1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbn1cblxuLmVuYWJsZS1kaXNhYmxlLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogNTBweDtcbiAgICByaWdodDogMTBweDtcbiAgICBmb250LXNpemU6IDhweDtcbn1cblxuLmF2YWlsYWJsZS1pbmZvLWxhYmVsIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAxMDBweDtcbiAgICBsZWZ0OiAxMHB4O1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHdoaXRlO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbiAgICBmb250LXNpemU6IDIwcHg7XG4gICAgd2lkdGg6IDE3NXB4O1xuICAgIGhlaWdodDogMzBweDtcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmctdG9wOiAycHg7XG59XG5cbi5vbnNhbGUtaW5mby1sYWJlbCB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIGJvdHRvbTogNTBweDtcbiAgICByaWdodDogMTBweDtcbiAgICBmb250LXNpemU6IDEwcHg7XG4gICAgYm9yZGVyOiAxcHggc29saWQgd2hpdGU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xuICAgIGNvbG9yOiBcIndoaXRlXCI7XG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xuICAgIHBhZGRpbmc6IDRweDtcbn1cblxuLyogV29ya3MgLSBwYXNzIFwibXktY3VzdG9tLWNsYXNzXCIgaW4gY3NzQ2xhc3MgdG8gaW5jcmVhc2Ugc3BlY2lmaWNpdHkgKi9cbi5teS1hY3Rpb24tc2hlZXQgLmFjdGlvbi1zaGVldC1ncm91cCB7XG4gIGJhY2tncm91bmQ6ICNlNWU1ZTU7XG59XG5cbi8qIFdvcmtzIC0gcGFzcyBcIm15LWN1c3RvbS1jbGFzc1wiIGluIGNzc0NsYXNzIHRvIGluY3JlYXNlIHNwZWNpZmljaXR5ICovXG4ubXktbW9kYWwgLm1vZGFsLXdyYXBwZXIge1xuICBiYWNrZ3JvdW5kOiAjMjIyO1xufSJdfQ== */\";","import { Injectable } from '@angular/core';\n\nimport { GlobalService } from \"src/app/services/global.service\";\nimport { NodeService } from \"src/app/services/node.service\";\nimport { WalletService } from \"src/app/services/wallet.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CardService {\n\n    constructor(\n        private globalService: GlobalService,\n        private nodeService: NodeService,\n        private walletService: WalletService\n    ) {\n\n    }\n\n    mint(name, description, color, type, mana, attack, guard, price, imgHash) {\n        let data = this.nodeService.contract.methods.mint(name, description, color, type, mana, attack, guard, this.nodeService.toWei(price), imgHash).encodeABI();\n        return this.nodeService.sendTransaction(\n            this.walletService.address,\n            this.nodeService.contractAddress,\n            0,\n            data,\n            this.walletService.privateKey\n        ); \n    }\n    \n    async getCardsOnSale() {\n        var tokens = await this.nodeService.contract.methods\n            .getTokensIdOnSale()\n            .call({ from: this.walletService.address });\n        return this.getCards(tokens);\n    }\n    \n    async getMyCards() {\n        var tokens = await this.nodeService.contract.methods\n            .getMyTokensId()\n            .call({ from: this.walletService.address });\n        return this.getCards(tokens);\n    }\n\n    getCards(tokens) {\n        return new Promise(async (resolve, reject) => {\n            if (tokens.length === 0)\n                resolve([]);\n            else {\n                var batch = new this.nodeService.web3.BatchRequest();\n                var batchResponses = [];\n                var cards = [];\n\n                for ( var i = 0; i < tokens.length; i++) {\n                    ((i) => {\n                        var tokenId = tokens[i];\n                        //console.log(\"tokenId\", tokenId);\n                        batch.add(\n                            this.nodeService.contract.methods\n                                .getToken(tokenId)\n                                .call.request({ from: this.walletService.address }, (error, response) => {\n                                    if (error) console.log(\"error\", error);\n                                    //console.log(\"response\", response);\n                                    batchResponses.push(response);\n                                    if (!error) {\n                                        cards.push({\n                                            tokenId: tokens[i],\n                                            name: response[0],\n                                            description: response[1],\n                                            color: response[2],\n                                            type: response[3],\n                                            mana: response[4],\n                                            attack: response[5],\n                                            guard: response[6],\n                                            price: this.nodeService.fromWei(response[7]),\n                                            imgHash: response[8],\n                                            available: response[9],\n                                            onSale: response[10]\n                                        });\n                                    }\n                                    if (tokens.length === batchResponses.length) {\n                                        resolve(cards);\n                                    }\n                                })\n                        );\n                    })(i);\n                }\n\n                batch.execute();                 \n            }           \n        });\n    }\n\n    setAvailable(tokenId, value) {\n        let data = this.nodeService.contract.methods.setAvailable(tokenId, value).encodeABI();\n        return this.nodeService.sendTransaction(\n            this.walletService.address,\n            this.nodeService.contractAddress,\n            0,\n            data,\n            this.walletService.privateKey\n        ); \n    }\n\n    buy(tokenId, price) {\n        let data = this.nodeService.contract.methods.buyToken(tokenId).encodeABI();\n        return this.nodeService.sendTransaction(\n            this.walletService.address,\n            this.nodeService.contractAddress,\n            this.nodeService.toWei(price),\n            data,\n            this.walletService.privateKey\n        ); \n    }\n\n    transfer(tokenId, address) {\n        let data = this.nodeService.contract.methods.transfer(address, tokenId).encodeABI();\n        return this.nodeService.sendTransaction(\n            this.walletService.address,\n            this.nodeService.contractAddress,\n            0,\n            data,\n            this.walletService.privateKey\n        ); \n    }\n\n    putOnSale(tokenId, price, onSale) {\n        let data = this.nodeService.contract.methods.setTokenOnSale(tokenId, this.nodeService.toWei(price), onSale).encodeABI();\n        return this.nodeService.sendTransaction(\n            this.walletService.address,\n            this.nodeService.contractAddress,\n            0,\n            data,\n            this.walletService.privateKey\n        ); \n    }\n\n}\n"]}